---
interface Props {
  lang: 'fr' | 'es' | 'en'
  title?: string
  settings?: {
    social?: { instagram?: string; facebook?: string }
    contactEmail?: string
  }
}

const { lang, title = 'Compagnie Azul', settings } = Astro.props

const L = {
  fr: { home: 'Accueil', projets: 'Projets', presse: 'Presse', aPropos: 'À propos', contact: 'Contact' },
  es: { home: 'Inicio',  projets: 'Proyectos', presse: 'Prensa', aPropos: 'Acerca de', contact: 'Contacto' },
  en: { home: 'Home',    projets: 'Projects',  presse: 'Press',  aPropos: 'About',     contact: 'Contact' },
}[lang]
---
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root { --max: 1100px; --muted:#666; font-family: system-ui, sans-serif; }
      header, main, footer { max-width: var(--max); margin: 1.25rem auto; padding: 0 1rem; }
      header { display:flex; align-items:center; justify-content:space-between; gap:1rem; }
      nav a { text-decoration:none; margin-right: .75rem; color: inherit; }
      .lang a { margin-left:.5rem; }
      .brand { font-weight:600; letter-spacing:.02em; }
      footer { border-top:1px solid #e5e5e5; padding-top:1rem; color: var(--muted); font-size:.95rem; }
      footer a { color: inherit; }
      .spacer { height: .5rem; }
    </style>
  </head>
  <body>
    <header>
      <div class="brand"><a href={`/${lang}`} style="text-decoration:none;">Compagnie Azul</a></div>
      <nav aria-label="primary">
        <a href={`/${lang}`}>{L.home}</a>
        <a href={`/${lang}/projets/spectacles`}>Spectacles</a>
        <a href={`/${lang}/projets/photo-video`}>Photographie & art-vidéo</a>
        <a href={`/${lang}/projets/mediation`}>Médiation</a>
        <a href={`/${lang}/presse`}>{L.presse}</a>
        <a href={`/${lang}/a-propos`}>{L.aPropos}</a>
        <a href={`/${lang}/contact`}>{L.contact}</a>
      </nav>
      <div class="lang" aria-label="language">
        <a href="/fr">FR</a> | <a href="/es">ES</a> | <a href="/en">EN</a>
      </div>
    </header>

    <main>
      <slot />
    </main>

    <footer>
      <div class="spacer"></div>
      {settings && (settings.social?.instagram || settings.social?.facebook || settings.contactEmail) && (
        <p>
          {settings.social?.instagram && <a href={settings.social.instagram} target="_blank" rel="noopener">Instagram</a>}{" "}
          {settings.social?.facebook && <>· <a href={settings.social.facebook} target="_blank" rel="noopener">Facebook</a></>}
          {settings.contactEmail && <> · <a href={`mailto:${settings.contactEmail}`}>{settings.contactEmail}</a></>}
        </p>
      )}
      <p>© {new Date().getFullYear()} Compagnie Azul</p>
    </footer>
  </body>
</html>
